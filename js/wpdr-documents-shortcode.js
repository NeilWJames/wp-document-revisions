(o=>{let{registerBlockType:e,createBlock:x}=wp.blocks,a=wp.element.createElement,l=wp.blockEditor.InspectorControls,{PanelBody:d,RadioControl:m,RangeControl:p,TextControl:u,TextareaControl:c,ToggleControl:w}=wp.components,h=wp.i18n.__;e("wp-document-revisions/documents-shortcode",{title:h("Documents List","wp-document-revisions"),description:h("Display a list of documents.","wp-document-revisions"),category:"wpdr-category",icon:"editor-ul",attributes:{header:{type:"string",default:""},taxonomy_0:{type:"string",default:""},term_0:{type:"number",default:0},taxonomy_1:{type:"string",default:""},term_1:{type:"number",default:0},taxonomy_2:{type:"string",default:""},term_2:{type:"number",default:0},numberposts:{type:"number",default:5},orderby:{type:"string"},order:{type:"string",default:"ASC"},show_edit:{type:"string",default:""},show_thumb:{type:"boolean",default:!1},show_descr:{type:"boolean",default:!0},show_pdf:{type:"boolean",default:!1},new_tab:{type:"boolean",default:!0},freeform:{type:"string",default:""},align:{type:"string"},backgroundColor:{type:"string"},linkColor:{type:"string"},textColor:{type:"string"},gradient:{type:"string"},fontSize:{type:"string"},style:{type:"object"}},supports:{align:!0,color:{gradients:!0,link:!0},spacing:{margin:!0,padding:!0},typography:{fontSize:!0,lineHeight:!0}},edit(e){let n=e.attributes,r=e.setAttributes;var s=wpdr_data.taxos;function t(e,t,o){for(i=0;i<wpdr_data.stmax;i++)if(i!=e&&t===s[i].query){var n=s[i].terms;for(j=0,lenj=n.length;j<lenj;j++)if(o===n[j][0])return t+'="'+n[j][2]+'"';return t+'="??"'}return t+'="???"'}return 0<wpdr_data.stmax&&""!==n.taxonomy_0&&n.taxonomy_0!==s[0].query&&(r({freeform:n.freeform+" "+t(0,n.taxonomy_0,n.term_0)}),r({taxonomy_0:s[0].query}),r({term_0:0})),1<wpdr_data.stmax&&""!==n.taxonomy_1&&n.taxonomy_1!==s[1].query&&(r({freeform:n.freeform+" "+t(1,n.taxonomy_1,n.term_1)}),r({taxonomy_1:s[1].query}),r({term_1:0})),2<wpdr_data.stmax&&""!==n.taxonomy_2&&n.taxonomy_2!==s[2].query&&(r({freeform:n.freeform+" "+t(2,n.taxonomy_2,n.term_2)}),r({taxonomy_2:s[2].query}),r({term_2:0})),a("div",{},[a(o,{block:"wp-document-revisions/documents-shortcode",attributes:n}),a(l,{},[a(u,{type:"string",value:n.header,label:h("Block Heading","wp-document-revisions"),onChange:function(e){r({header:e})}}),(()=>{if(0==wpdr_data.stmax)return a("p",{},h("There are no taxonomies defined.","wp-document-revisions"));for(var e=[],t=0;t<wpdr_data.stmax;t++)e.push((e=>{var t=s[e].terms,o=[];for(j=0,lenj=t.length;j<lenj;j++)o.push({label:t[j][1],value:t[j][0]});return 0==e?(r({taxonomy_0:s[0].query}),a(d,{title:h("Taxonomy: ","wp-document-revisions")+s[0].label,initialOpen:!1},[a(m,{label:s[0].label,selected:n.term_0,options:o,onChange:function(e){r({term_0:parseInt(e)})}})])):1==e?(r({taxonomy_1:s[1].query}),a(d,{title:h("Taxonomy: ","wp-document-revisions")+s[1].label,initialOpen:!1},[a(m,{label:s[1].label,selected:n.term_1,options:o,onChange:function(e){r({term_1:parseInt(e)})}})])):2==e?(r({taxonomy_2:s[2].query}),a(d,{title:h("Taxonomy: ","wp-document-revisions")+s[2].label,initialOpen:!1},[a(m,{label:s[2].label,selected:n.term_2,options:o,onChange:function(e){r({term_2:parseInt(e)})}})])):void 0})(t));return e})(),a(d,{title:h("Display Settings","wp-document-revisions"),initialOpen:!1},[a(p,{value:n.numberposts,label:h("Number of documents to display","wp-document-revisions"),onChange:function(e){r({numberposts:parseInt(e)})},min:1,step:1}),a(u,{type:"string",value:n.orderby,label:h("List ordering Field","wp-document-revisions"),help:h("Example fields are post_title, post_date and post_modified.","wp-document-revisions"),onChange:function(e){r({orderby:e})}}),a(m,{label:h("Order sequence"),selected:n.order,options:[{label:h("Ascending","wp-document-revisions"),value:"ASC"},{label:h("Descending","wp-document-revisions"),value:"DESC"}],onChange:function(e){r({order:e})}}),a(m,{label:h("Show Edit link","wp-document-revisions"),help:h("Show Edit link allows the list to have a link to the Edit function. A choice made here will over-ride the system-configured settings. Links will only appear if the user can edit the document.","wp-document-revisions"),selected:n.show_edit,options:[{label:h("Default","wp-document-revisions"),value:""},{label:h("No Edit link","wp-document-revisions"),value:"0"},{label:h("Edit link","wp-document-revisions"),value:"1"}],onChange:function(e){r({show_edit:e})}}),a(w,{type:"boolean",checked:n.show_thumb,label:h("Show featured image?","wp-document-revisions"),onChange:function(e){r({show_thumb:e})}}),a(w,{type:"boolean",checked:n.show_descr,label:h("Show document description?","wp-document-revisions"),onChange:function(e){r({show_descr:e})}}),a(w,{type:"boolean",checked:n.show_pdf,label:h("Show PDF File indication?","wp-document-revisions"),onChange:function(e){r({show_pdf:e})}}),a(w,{type:"boolean",checked:n.new_tab,label:h("Open documents in new tab?","wp-document-revisions"),help:h("Setting this on will open the document in a new tab. This should be set on whilst editing the page using this block as clicking on a link whilst editing will force the current page to be left.","wp-document-revisions"),onChange:function(e){r({new_tab:e})}})]),a(d,{title:h("Free Form Settings","wp-document-revisions"),initialOpen:!1},[a(c,{type:"string",rows:8,value:n.freeform,label:h("Free-form parameters","wp-document-revisions"),help:h("The query parameters can be very extensive. enter any other parameters required here.","wp-document-revisions"),onChange:function(e){r({freeform:e})}})])])])},save(){return null},transforms:{from:[{type:"block",blocks:["core/shortcode"],isMatch:function({text:e}){return/^\[?documents\b\s*/.test(e)},transform:({text:e})=>{var t,o,n,r="",i=0,s="",a=0,l="",d=0,m=5,p="",u="",c="",w=!1,h=!0,f=!1,_=!0,y="",e=e.toLowerCase(),e=(e=0==e.indexOf("[")?e.slice(1,e.length-1):e).split(" "),b=(e.shift(),wpdr_data.taxos),g=wpdr_data.wf_efpp;function v(e,t){var o=b[e].terms,n=t.replace(/_/g,"-");for(j=0,lenj=o.length;j<lenj;j++)if(t===o[j][2]||n===o[j][2])return o[j][0];return 0}for(t of e)0!==t.length&&(o=!1,1<(n=t.split("=")).length&&(0===n[1].indexOf("'")||0===n[1].indexOf('"'))&&(n[1]=n[1].slice(1,n[1].length-1)),"1"===g&&"workflow_state"===n[0]&&(n[0]="post_status"),0<wpdr_data.stmax&&n[0]===b[0].query&&(r=n[0],i=v(0,n[1]),o=!0),1<wpdr_data.stmax&&n[0]===b[1].query&&(s=n[0],a=v(1,n[1]),o=!0),2<wpdr_data.stmax&&n[0]===b[2].query&&(l=n[0],d=v(2,n[1]),o=!0),"number"===n[0]&&(m=Number(n[1]),o=!0),"numberposts"===n[0]&&(m=Number(n[1]),o=!0),"orderby"===n[0]&&(p=n[1],o=!0),"order"===n[0]&&(u=n[1].toUpperCase(),o=!0),"show_edit"===n[0]&&(c=n[1],o=!0),"show_thumb"===n[0]&&(1!==n.length&&"true"!==n[1]||(w=!0),o=!0),"show_descr"===n[0]&&(2===n.length&&"false"===n[1]&&(h=!1),o=!0),"show_pdf"===n[0]&&(1!==n.length&&"true"!==n[1]||(f=!0),o=!0),"new_tab"===n[0]&&(2===n.length&&"false"===n[1]&&(_=!1),o=!0),0==o)&&(y+=" "+t);return x("wp-document-revisions/documents-shortcode",{header:"",taxonomy_0:r,term_0:i,taxonomy_1:s,term_1:a,taxonomy_2:l,term_2:d,numberposts:m,orderby:p,order:u,show_edit:c,show_thumb:w,show_descr:h,show_pdf:f,new_tab:_,freeform:y.trim()})}}],to:[{type:"block",blocks:["core/shortcode"],transform:e=>{var n=wpdr_data.taxos;function t(e,t){if(""!==e&&0!=t){for(var o in[0,1,2])if(e===n[o].query)return void(r+=" "+e+"="+((e,t)=>{var o=n[e].terms;for(j=0,lenj=o.length;j<lenj;j++)if(t===o[j][0])return'"'+o[j][2]+'"';return"??"})(o,t));r+=" "+e+"="+t}}var r="[documents ";return t(e.taxonomy_0,e.term_0),t(e.taxonomy_1,e.term_1),t(e.taxonomy_2,e.term_2),""!==e.numberposts&&(r+=' numberposts="'+e.numberposts+'"'),void 0!==e.orderby&&""!==e.orderby&&(r+=' orderby="'+e.orderby+'"'),""!==e.order&&void 0!==e.orderby&&""!==e.orderby&&(r+=' order="'+e.order+'"'),""!==e.show_edit&&(r+=' show_edit="'+e.show_edit+'"'),e.show_thumb&&(r+=" show_thumb"),e.show_descr&&(r+=" show_descr"),e.show_pdf&&(r+=" show_pdf"),e.new_tab&&(r+=" new_tab"),""!==e.freeform&&void 0!==e.freeform&&(r+=" "+e.freeform),r+=" ]",x("core/shortcode",{text:r})}}]}})})((window.wp.blocks,window.wp.element,window.wp.blockEditor,window.wp.components,window.wp.compose,window.wp.serverSideRender),window.wp.i18n);